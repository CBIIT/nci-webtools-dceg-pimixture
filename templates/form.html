<form id="calculationForm" class="well form-horizontal" method="POST">
    <fieldset id="fileSet" class="well">
        <div class="form-group">
            <label class="control-label col-md-4">Job Name <a id="jobNamePopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8">
                <input type="text" name="jobName" placeholder="PIMixture" class="form-control" value="<%= data.jobName %>">
            </div>
        </div>
        <div class="form-group">
            <label id="csvFileLabel" class="col-md-4 control-label">Input File <span class="text-danger">*</span> <a id="inputFilePopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8 sampleDownloadContainer">
                <a href="bd.mock.data.csv" download="PIMixtureSample.csv" class="sampleDownload">Download Sample</a>
            </div>
        </div>
        <div class="form-group" style="margin-bottom: 5px;">
            <div class="col-md-3" style="padding-left: 0;">
                <input id="csvFile" name="csvFile" type="file" accept=".csv" style="display:none;">
                <button id="csvFileBtn" type="button" class="btn btn-default btn-sm" onclick="document.getElementById('csvFile').click();" <%= data.csvFile.name ? 'disabled' : '' %>>Choose File</button>
            </div>
            <div class="col-md-9">
                <div id="csvFileName"><%= data.csvFile.name %></div>
            </div>
        </div>
    </fieldset>
    <fieldset id="designAndModelSet" class="well form-group">
        <div class="form-group">
            <label id="designLabel" class="control-label col-md-6">Sample Design <span class="text-danger">*</span> <a id="designPopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-6">
                <select name="design" class="form-control" required <%= data.csvFile.name ? '' : 'disabled' %>>
                    <option value="">----Select Design---</option>
                    <option value="null" <%= data.design === null ? 'selected' : '' %>>Cohort (Unweighted)</option>
                    <option value="1" <%= data.design === 1 ? 'selected' : '' %>>Cohort (Weighted)</option>
                </select>
            </div>
        </div>
        <div class="form-group">
        <label id="modelLabel" class="control-label col-md-6">Regression Model <span class="text-danger">*</span> <a id="modelPopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-6">
                <select name="model" class="form-control" required <%= data.csvFile.name ? '' : 'disabled' %>>
                    <option value="">----Select Model----</option>
                    <option <%= data.model === 'semi-parametric' ? 'selected' : '' %> value="semi-parametric">Semi-parametric</option>
                    <option <%= data.model === 'weakly-parametric' ? 'selected' : '' %> value="weakly-parametric">Weakly-parametric</option>
                    <option <%= data.model === 'logistic-Weibull' ? 'selected' : '' %> <%= data.design === 1 ? 'disabled' : '' %> value="logistic-Weibull">Parametric</option>
                </select>
            </div>
        </div>
    </fieldset>
    <fieldset id="covariatesSet" class="well">
        <div id="mutex-error" class=""></div>
        <div id="Strata" class="form-group" <%= data.design !== 1 ? 'hidden' : '' %>>
            <label class="control-label col-md-4">Strata <span class="text-danger">*</span> <a id="strataPopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8">
                <select name="strata" class="form-control" <%= data.csvFile.name ? '' : 'disabled' %>>
                        <option value="">----Select Strata----</option>
                    <% for (var field of data.headers) { %>
                        <option <%= data.strata === field ? 'selected' : ''%>><%= field %></option>
                    <% } %>
                </select>
            </div>
        </div>
        <div id="Weight" class="form-group" <%= data.design !== 1 ? 'hidden' : '' %>>
            <label class="control-label col-md-4">Weight <span class="text-danger">*</span> <a id="weightPopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8">
                <select name="weight" class="form-control" <%= data.csvFile.name ? '' : 'disabled' %>>
                    <option value="">----Select Weight----</option>
                <% for (var field of data.headers) { %>
                    <option <%= data.strata === field ? 'selected' : ''%>><%= field %></option>
                <% } %>
                </select>
            </div>
        </div>
        <div id="outcomeC" class="form-group">
            <label class="control-label col-md-4">C <span class="text-danger">*</span> <a role="button" tabindex="0" class="outcomePopover glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8">
                <select name="outcomeC" class="form-control" required <%= data.csvFile.name ? '' : 'disabled' %>>
                    <option value="">----Select outcomeC----</option>
                    <% for (var outcome of data.headers) { %>
                        <option <%= data.outcomeC === outcome ? 'selected' : ''%>><%= outcome %></option>
                    <% } %>
                </select>
            </div>
        </div>
        <div id="outcomeL" class="form-group">
            <label class="control-label col-md-4">L <span class="text-danger">*</span> <a role="button" tabindex="0" class="outcomePopover glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8">
                <select name="outcomeL" class="form-control" required <%= data.csvFile.name ? '' : 'disabled' %>>
                    <option value="">----Select outcomeL----</option>
                    <% for (var outcome of data.headers) { %>
                        <option <%= data.outcomeL === outcome ? 'selected' : ''%>><%= outcome %></option>
                    <% } %>
                </select>
            </div>
        </div>
        <div id="outcomeR" class="form-group">
            <label class="control-label col-md-4">R <span class="text-danger">*</span> <a role="button" tabindex="0" class="outcomePopover glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8">
                <select name="outcomeR" class="form-control" required <%= data.csvFile.name ? '' : 'disabled' %>>
                    <option value="">----Select outcomeR----</option>
                    <% for (var outcome of data.headers) { %>
                        <option <%= data.outcomeR === outcome ? 'selected' : ''%>><%= outcome %></option>
                    <% } %>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-4">Covariates <a id="covariatePopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-8">
                <input type="text" name="covariatesSelection" class="form-control" <%= data.csvFile.name ? '' : 'disabled' %>>
            </div>
        </div>
        <div id="covariates-error" class=""></div>
        <div id="categoricalGroups" class="form-group">
            <div class="col-md-8 col-md-offset-4">
                <button id="referencesButton" class="btn btn-default form-control" disabled>Configure Covariates</button>
            </div>
        </div>
        <div id="effectsSet" class="form-group">
            <div class="col-md-8 col-md-offset-4">
                <button id="effectsButton" class="btn btn-default form-control" disabled>Edit Interactive Effects</button>
            </div>
        </div>
    </fieldset>
    <fieldSet id="emailSet" class="well">
        <div class="form-group">
            <div class="checkbox col-md-12">
                <label><input type="checkbox" name="sendToQueue" value="" <%= data.csvFile.name ? '' : 'disabled' %>
                    <%= data.sendToQueue ? 'checked' : '' %>>Submit this job to a queue</label> <a id="queuePopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a><span id="numMessages"></span>
            </div>
        </div>
        <div id="email-error" class=""></div>
        <div class="form-group">
            <label class="control-label col-md-3">Email <a id="emailPopover" role="button" tabindex="0" class="glyphicon glyphicon-question-sign"></a></label>
            <div class="col-md-9">
                <input type="text" name="email" class="form-control"  value="<%= data.email %>" <%= data.sendToQueue ? '' : 'disabled' %>>
            </div>
        </div>
        <div id="queueMessage">Note: if sending to queue, when computation is completed, a notification will be sent to the e-mail entered above.</div>
    </fieldset>
    <fieldset id="submitSet" class="form-group">
        <div class="col-md-3 col-md-offset-6">
            <button id="run" type="submit" class="btn btn-primary form-control" <%= data.csvFile.name ? '' : 'disabled' %> style="position: relative;">Submit</button>
        </div>
        <div class="col-md-3">
            <button id="reset" type="reset" class="btn btn-default form-control" <%= data.csvFile.name ? '' : 'disabled' %>>Reset</button>
        </div>
        <div id="error-message">
        </div>
    </fieldset>
</form>
